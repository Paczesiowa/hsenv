if [ -n "${VIRTHUALENV}" ]; then
    echo "Virtual Haskell Environment is already activated (${VIRTHUALENV})."
else
    VIRTHUALENV=<VIRTHUALENV>
    export VIRTHUALENV

    GHC_PACKAGE_PATH=<GHC_PACKAGE_PATH>
    export GHC_PACKAGE_PATH

    echo -e "#!/bin/sh\nexport PATH=${PATH}; rm ${VIRTHUALENV}/.virthualenv/deactivate; unset VIRTHUALENV; unset GHC_PACKAGE_PATH" > ${VIRTHUALENV}/.virthualenv/deactivate

    function deactivate {
        source ${VIRTHUALENV}/.virthualenv/deactivate
        unset deactivate
    }

    export PATH=${VIRTHUALENV}/.virthualenv/bin:${VIRTHUALENV}/.cabal/bin:${PATH}
fi
